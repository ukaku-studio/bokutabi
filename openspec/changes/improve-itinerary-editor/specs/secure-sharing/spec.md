# Secure Sharing

## ADDED Requirements

### Requirement: 開発環境はHTTP Basic認証で保護される
アプリケーションは、開発/ステージング環境を不正アクセスから保護するためにHTTP Basic認証をサポートしなければならない（SHALL）。

#### Scenario: 初回アクセス時のBasic認証プロンプト
- **WHEN** ユーザーが開発モードでアプリケーションにアクセスする
- **AND** 有効なセッションが存在しない
- **THEN** ユーザー名/パスワードフォームが表示される
- **AND** 認証されるまでどのページにもアクセスできない

#### Scenario: Basic認証ログイン成功
- **WHEN** ユーザーが正しい認証情報を入力する
- **THEN** すべてのページへのアクセスが許可される
- **AND** セッションはlocalStorageに保存される
- **AND** 以降のアクセスでは再認証不要

#### Scenario: Basic認証ログイン失敗
- **WHEN** ユーザーが誤った認証情報を入力する
- **THEN** エラーメッセージが表示される
- **AND** 別の認証情報で再試行できる

#### Scenario: 本番環境ではBasic認証無効
- **WHEN** アプリケーションが本番モードで動作している
- **THEN** Basic認証は無効である
- **AND** アプリは公開アクセス可能（旅程パスワードのみで保護）

### Requirement: 旅程のプレビューモード
ユーザーは共有前に旅程がどのように表示されるかをプレビューできなければならない（SHALL）。

#### Scenario: 作成ページからプレビューにアクセス
- **WHEN** ユーザーが旅程を作成/編集中である
- **AND** 「プレビュー」ボタンをクリックする
- **THEN** 整形された旅程を表示するプレビューページが開く
- **AND** アイテムは日付ごとにグループ化され整形される
- **AND** 「戻る」ボタンでエディタに戻れる

#### Scenario: 共有旅程ビューでの編集ボタン
- **WHEN** ユーザーが共有リンクで自分の旅程を閲覧する
- **AND** 作成者である（認証トークンが一致）
- **THEN** 「編集する」ボタンが表示される
- **AND** クリックすると既存データがロードされたエディタが開く

### Requirement: ダークモードでのパスワード入力欄スタイリング
パスワード入力欄はダークモードで適切なスタイリングが適用されなければならない（SHALL）。

#### Scenario: ダークモードでパスワード入力が見える
- **WHEN** ユーザーがダークモードでパスワードモーダルを開く
- **THEN** パスワード入力欄は白背景である
- **AND** テキストは見えて読める
